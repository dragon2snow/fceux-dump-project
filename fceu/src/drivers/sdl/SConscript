# Fix compliation error about 'XKeysymToString' by linking X11 explicitly
# Thanks Antonio Ospite!
Import('env')
env.ParseConfig('pkg-config --cflags --libs x11')
if env['GTK']:
  # Add compiler and linker flags from pkg-config
  env.ParseConfig('pkg-config --cflags --libs gtk+-2.0')
  env.Append(CPPDEFINES=["_GTK2"])
  env.Append(CCFLAGS = ["-D_GTK"])
if env['GTK3']:
# Add compiler and linker flags from pkg-config
  env.ParseConfig('pkg-config --cflags --libs gtk+-3.0')
  env.Append(CPPDEFINES=["_GTK3"])
  env.Append(CCFLAGS = ["-D_GTK"])
Export('env')


my_list =  Split("""
input.cpp
config.cpp
sdl.cpp
sdl-joystick.cpp
sdl-sound.cpp
sdl-throttle.cpp
sdl-video.cpp
unix-netplay.cpp
""")

Import('env')
if 'GL' in env['LIBS']:
  my_list.append('sdl-opengl.cpp')

for x in range(len(my_list)):
  my_list[x] = 'drivers/sdl/' + my_list[x]
Return('my_list')
